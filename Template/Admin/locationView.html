
{% load static %}

{% include 'Admin/Header.html' %}

<div class="pcoded-content">
    <div class="pcoded-inner-content">

        <!-- Main-body start -->
        <div class="main-body">
            <div class="page-wrapper">
                <!-- Page-header start -->
                <div class="page-header card">
                    <div class="row align-items-end">
                        <div class="col-lg-8">
                            <div class="page-header-title">
                                <i class="icofont icofont-file-code bg-c-blue"></i>
                                <div class="d-inline">
                                    <h4>Location View Form</h4>

                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="page-header-breadcrumb">
                                <ul class="breadcrumb-title">
                                    <li class="breadcrumb-item">
                                        <a href="index.html">
                                            <i class="icofont icofont-home"></i>
                                        </a>
                                    </li>
                                    <!-- <li class="breadcrumb-item"><a href="#!">Form Components</a>
                                    </li>
                                    <li class="breadcrumb-item"><a href="#!">Form Components</a>
                                    </li> -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Page-header end -->
                <div class="page-body">
                    <div class="row">
                        <div class="col-sm-12">
                            <!-- Basic Form Inputs card start -->
                            <div class="card">
                                <div class="card-header">

                                    <div class="card-header-right"><i class="icofont icofont-spinner-alt-5"></i></div>

                                    <div class="card-header-right">
                                        <i class="icofont icofont-spinner-alt-5"></i>
                                    </div>

                                </div>
                                <div class="card-block">
                                    <h4 class="sub-title">Location View</h4>
                                   
                                        <div class="form-group row">
                                            <label class="col-sm-2 col-form-label">Select District</label>
                                            <div class="col-sm-10">
                                                <select name="districtid" id="districtid" class="form-control">
                                                    <option value="">Select District</option>
                                                    {% for d in district %}
                                                    <option value="{{d.district_id}}">{{d.district_name}}</option>
                                                    {% endfor %}
                                                </select><br>
                                            </div>
                                        </div>
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Location table</h5>
                                                <div class="card-header-right">
                                                <ul class="list-unstyled card-option">        
                                                <li><i class="icofont icofont-simple-left "></i></li>        
                                                <li><i class="icofont icofont-maximize full-card"></i></li>        
                                                <li><i class="icofont icofont-minus minimize-card"></i></li>        
                                                <li><i class="icofont icofont-refresh reload-card"></i></li>        
                                                <li><i class="icofont icofont-error close-card"></i></li>    
                                            </ul></div>
                                            </div>
                                            <div class="card-block table-border-style">
                                                <div class="table-responsive">
                                                    <table class="table table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Location Name</th>
                                                                <th>Delete</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="locations">
                                                            
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                       
                                   
                                    <script src="{% static 'jquery-3.7.1.min.js' %}"></script>
                                    <script>
                                        $(document).ready(function() {
                                          //  alert('haii');
                                         $.ajaxSetup({
                                            headers: { "X-CSRFToken": '{{csrf_token}}' }
                                          });
                                          $('#districtid').change(function () {
                                            var districtid = $(this).val();
                                              //alert(district);
                                            $.ajax({
                                              type: "POST",
                                              url: '{% url "filllocation" %}',
                                              data: { did: districtid },
                                              dataType: "json",
                                              success: function (data) {
                                                $('#locations').empty();
                                                  //alert("test");
                                                  s = 1;
                                                  $.each(data, function (key, val) {
                                                  var id=val.location_id;
                                                  var deleteurl='{% url "deletelocation" 0 %}'.replace('0', id);
                                                  var row = '<tr> <td>' + s++ + '</td>' +
                                                                  '<td>' + val.location_name + '</td>'+
                                                                  '<td class="text-danger"><a href=" ' + deleteurl +'">Delete</a></td>'+
                                                            '</tr>';
                                                  $('#locations').append(row);
                                              });
                                              }
                                            });
                                          });
                                        });
                                        </script>
                                      
                                                                         

                                    {% include 'Admin/Footer.html' %}